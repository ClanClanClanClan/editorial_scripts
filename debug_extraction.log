2025-07-10 13:16:31,523 - INFO - üß™ Starting comprehensive MF extraction test
2025-07-10 13:16:31,524 - INFO - üöÄ Creating Chrome driver (attempt 1)
2025-07-10 13:16:31,524 - DEBUG - getting release number from /last-known-good-versions-with-downloads.json
2025-07-10 13:16:31,908 - DEBUG - downloading from https://storage.googleapis.com/chrome-for-testing-public/138.0.7204.94/mac-x64/chromedriver-mac-x64.zip
2025-07-10 13:16:44,382 - DEBUG - unzipping /var/folders/k0/qb_t2c8s0ml8ndp82vnmq3p80000gn/T/tmphz__aoql
2025-07-10 13:16:44,463 - INFO - patching driver executable /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver
2025-07-10 13:16:44,479 - DEBUG - found block:
b'{window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Object = window.Object;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Proxy = window.Proxy;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;window.cdc_adoQpoasnfa76pfcZLmcfl_JSON = window.JSON;window.cdc_adoQpoasnfa76pfcZLmcfl_Window = window.Window;}'
replacing with:
b'{console.log("undetected chromedriver 1337!")}                                                                                                                                                                                                                                                                                                                                                             '
2025-07-10 13:16:44,482 - DEBUG - patching took us 0.02 seconds
2025-07-10 13:16:44,500 - DEBUG - Skipping Selenium Manager; path to chrome driver specified in Service class: /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver
2025-07-10 13:16:44,505 - DEBUG - Started executable: `/Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver` in a child process with pid: 23998 using 0 to output -3
2025-07-10 13:16:50,934 - ERROR - ‚ùå Driver creation attempt 1 failed: Message: Service /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver unexpectedly exited. Status code was: -9

2025-07-10 13:16:50,934 - INFO - üîÑ Retrying driver creation...
2025-07-10 13:16:52,939 - INFO - üöÄ Creating Chrome driver (attempt 2)
2025-07-10 13:16:52,943 - DEBUG - getting release number from /latest-versions-per-milestone-with-downloads.json
2025-07-10 13:16:53,427 - DEBUG - downloading from https://storage.googleapis.com/chrome-for-testing-public/126.0.6478.182/mac-x64/chromedriver-mac-x64.zip
2025-07-10 13:17:00,694 - DEBUG - unzipping /var/folders/k0/qb_t2c8s0ml8ndp82vnmq3p80000gn/T/tmpwxy1_q6w
2025-07-10 13:17:00,775 - INFO - patching driver executable /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver
2025-07-10 13:17:00,794 - DEBUG - found block:
b'{window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Object = window.Object;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Proxy = window.Proxy;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;window.cdc_adoQpoasnfa76pfcZLmcfl_JSON = window.JSON;}'
replacing with:
b'{console.log("undetected chromedriver 1337!")}                                                                                                                                                                                                                                                                                                    '
2025-07-10 13:17:00,798 - DEBUG - patching took us 0.02 seconds
2025-07-10 13:17:00,812 - DEBUG - Skipping Selenium Manager; path to chrome driver specified in Service class: /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver
2025-07-10 13:17:00,817 - DEBUG - Started executable: `/Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver` in a child process with pid: 24016 using 0 to output -3
2025-07-10 13:17:08,758 - DEBUG - POST http://localhost:63380/session {'capabilities': {'firstMatch': [{}], 'alwaysMatch': {'browserName': 'chrome', 'pageLoadStrategy': <PageLoadStrategy.normal: 'normal'>, 'goog:chromeOptions': {'excludeSwitches': ['enable-automation'], 'useAutomationExtension': False, 'extensions': [], 'binary': '/Applications/Google Chrome.app/Contents/MacOS/Google Chrome', 'args': ['--no-sandbox', '--disable-dev-shm-usage', '--disable-gpu', '--window-size=1920,1080', '--disable-web-security', '--disable-features=VizDisplayCompositor', '--max_old_space_size=4096', '--disable-background-timer-throttling', '--disable-backgrounding-occluded-windows', '--disable-renderer-backgrounding', '--disable-blink-features=AutomationControlled', '--remote-debugging-host=127.0.0.1', '--remote-debugging-port=63379', '--user-data-dir=/var/folders/k0/qb_t2c8s0ml8ndp82vnmq3p80000gn/T/tmp83vspbxa', '--lang=en-GB', '--no-default-browser-check', '--no-first-run', '--no-sandbox', '--test-type', '--window-size=1920,1080', '--start-maximized', '--no-sandbox', '--log-level=0'], 'debuggerAddress': '127.0.0.1:63379'}}}}
2025-07-10 13:17:08,759 - DEBUG - Starting new HTTP connection (1): localhost:63380
2025-07-10 13:17:08,782 - DEBUG - http://localhost:63380 "POST /session HTTP/1.1" 400 0
2025-07-10 13:17:08,782 - DEBUG - Remote response: status=400 | data={"value":{"error":"invalid argument","message":"invalid argument: cannot parse capability: goog:chromeOptions\nfrom invalid argument: unrecognized chrome option: excludeSwitches","stacktrace":"0   undetected_chromedriver             0x00000001053de078 undetected_chromedriver + 5169272\n1   undetected_chromedriver             0x00000001053d5f4a undetected_chromedriver + 5136202\n2   undetected_chromedriver             0x0000000104f5236c undetected_chromedriver + 402284\n3   undetected_chromedriver             0x0000000104f7b923 undetected_chromedriver + 571683\n4   undetected_chromedriver             0x0000000104f7cc35 undetected_chromedriver + 576565\n5   undetected_chromedriver             0x0000000104f781c7 undetected_chromedriver + 557511\n6   undetected_chromedriver             0x0000000104fcd95b undetected_chromedriver + 907611\n7   undetected_chromedriver             0x0000000104fcd1b5 undetected_chromedriver + 905653\n8   undetected_chromedriver             0x0000000104fceef1 undetected_chromedriver + 913137\n9   undetected_chromedriver             0x0000000104fc2853 undetected_chromedriver + 862291\n10  undetected_chromedriver             0x0000000104f925c6 undetected_chromedriver + 665030\n11  undetected_chromedriver             0x0000000104f92e4e undetected_chromedriver + 667214\n12  undetected_chromedriver             0x00000001053a0c90 undetected_chromedriver + 4918416\n13  undetected_chromedriver             0x00000001053a5c8d undetected_chromedriver + 4938893\n14  undetected_chromedriver             0x00000001053a6365 undetected_chromedriver + 4940645\n15  undetected_chromedriver             0x0000000105381d74 undetected_chromedriver + 4791668\n16  undetected_chromedriver             0x00000001053a6659 undetected_chromedriver + 4941401\n17  undetected_chromedriver             0x0000000105373544 undetected_chromedriver + 4732228\n18  undetected_chromedriver             0x00000001053c6828 undetected_chromedriver + 5072936\n19  undetected_chromedriver             0x00000001053c69e7 undetected_chromedriver + 5073383\n20  undetected_chromedriver             0x00000001053d5afe undetected_chromedriver + 5135102\n21  libsystem_pthread.dylib             0x00007ff8073f2df1 _pthread_start + 99\n22  libsystem_pthread.dylib             0x00007ff8073ee857 thread_start + 15\n"}} | headers=HTTPHeaderDict({'Content-Length': '2318', 'Content-Type': 'application/json; charset=utf-8', 'cache-control': 'no-cache'})
2025-07-10 13:17:08,782 - DEBUG - Finished Request
2025-07-10 13:17:08,960 - ERROR - ‚ùå Driver creation attempt 2 failed: Message: invalid argument: cannot parse capability: goog:chromeOptions
from invalid argument: unrecognized chrome option: excludeSwitches
Stacktrace:
0   undetected_chromedriver             0x00000001053de078 undetected_chromedriver + 5169272
1   undetected_chromedriver             0x00000001053d5f4a undetected_chromedriver + 5136202
2   undetected_chromedriver             0x0000000104f5236c undetected_chromedriver + 402284
3   undetected_chromedriver             0x0000000104f7b923 undetected_chromedriver + 571683
4   undetected_chromedriver             0x0000000104f7cc35 undetected_chromedriver + 576565
5   undetected_chromedriver             0x0000000104f781c7 undetected_chromedriver + 557511
6   undetected_chromedriver             0x0000000104fcd95b undetected_chromedriver + 907611
7   undetected_chromedriver             0x0000000104fcd1b5 undetected_chromedriver + 905653
8   undetected_chromedriver             0x0000000104fceef1 undetected_chromedriver + 913137
9   undetected_chromedriver             0x0000000104fc2853 undetected_chromedriver + 862291
10  undetected_chromedriver             0x0000000104f925c6 undetected_chromedriver + 665030
11  undetected_chromedriver             0x0000000104f92e4e undetected_chromedriver + 667214
12  undetected_chromedriver             0x00000001053a0c90 undetected_chromedriver + 4918416
13  undetected_chromedriver             0x00000001053a5c8d undetected_chromedriver + 4938893
14  undetected_chromedriver             0x00000001053a6365 undetected_chromedriver + 4940645
15  undetected_chromedriver             0x0000000105381d74 undetected_chromedriver + 4791668
16  undetected_chromedriver             0x00000001053a6659 undetected_chromedriver + 4941401
17  undetected_chromedriver             0x0000000105373544 undetected_chromedriver + 4732228
18  undetected_chromedriver             0x00000001053c6828 undetected_chromedriver + 5072936
19  undetected_chromedriver             0x00000001053c69e7 undetected_chromedriver + 5073383
20  undetected_chromedriver             0x00000001053d5afe undetected_chromedriver + 5135102
21  libsystem_pthread.dylib             0x00007ff8073f2df1 _pthread_start + 99
22  libsystem_pthread.dylib             0x00007ff8073ee857 thread_start + 15

2025-07-10 13:17:08,960 - INFO - üîÑ Retrying driver creation...
2025-07-10 13:17:10,965 - INFO - üöÄ Creating Chrome driver (attempt 3)
2025-07-10 13:17:10,967 - DEBUG - getting release number from /last-known-good-versions-with-downloads.json
2025-07-10 13:17:11,314 - DEBUG - downloading from https://storage.googleapis.com/chrome-for-testing-public/138.0.7204.94/mac-x64/chromedriver-mac-x64.zip
2025-07-10 13:17:13,120 - DEBUG - unzipping /var/folders/k0/qb_t2c8s0ml8ndp82vnmq3p80000gn/T/tmppswuedqr
2025-07-10 13:17:13,200 - INFO - patching driver executable /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver
2025-07-10 13:17:13,215 - DEBUG - found block:
b'{window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Object = window.Object;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Proxy = window.Proxy;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;window.cdc_adoQpoasnfa76pfcZLmcfl_JSON = window.JSON;window.cdc_adoQpoasnfa76pfcZLmcfl_Window = window.Window;}'
replacing with:
b'{console.log("undetected chromedriver 1337!")}                                                                                                                                                                                                                                                                                                                                                             '
2025-07-10 13:17:13,218 - DEBUG - patching took us 0.02 seconds
2025-07-10 13:17:13,230 - DEBUG - Skipping Selenium Manager; path to chrome driver specified in Service class: /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver
2025-07-10 13:17:13,236 - DEBUG - Started executable: `/Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver` in a child process with pid: 24032 using 0 to output -3
2025-07-10 13:17:23,230 - ERROR - ‚ùå Driver creation attempt 3 failed: Message: Service /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver unexpectedly exited. Status code was: -9

2025-07-10 13:17:23,231 - ERROR - ‚ùå Test failed: Failed to create driver after 3 attempts
2025-07-10 13:17:23,239 - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 111, in create_robust_driver
    self.driver = uc.Chrome(options=options, version_main=None)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/undetected_chromedriver/__init__.py", line 466, in __init__
    super(Chrome, self).__init__(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/chrome/webdriver.py", line 47, in __init__
    super().__init__(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/chromium/webdriver.py", line 58, in __init__
    self.service.start()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/common/service.py", line 106, in start
    self.assert_process_still_running()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/common/service.py", line 119, in assert_process_still_running
    raise WebDriverException(f"Service {self._path} unexpectedly exited. Status code was: {return_code}")
selenium.common.exceptions.WebDriverException: Message: Service /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver unexpectedly exited. Status code was: -9


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 114, in create_robust_driver
    self.driver = uc.Chrome(options=options, version_main=126)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/undetected_chromedriver/__init__.py", line 466, in __init__
    super(Chrome, self).__init__(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/chrome/webdriver.py", line 47, in __init__
    super().__init__(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/chromium/webdriver.py", line 69, in __init__
    super().__init__(command_executor=executor, options=options)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webdriver.py", line 257, in __init__
    self.start_session(capabilities)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/undetected_chromedriver/__init__.py", line 724, in start_session
    super(selenium.webdriver.chrome.webdriver.WebDriver, self).start_session(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webdriver.py", line 356, in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webdriver.py", line 447, in execute
    self.error_handler.check_response(response)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/remote/errorhandler.py", line 232, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.InvalidArgumentException: Message: invalid argument: cannot parse capability: goog:chromeOptions
from invalid argument: unrecognized chrome option: excludeSwitches
Stacktrace:
0   undetected_chromedriver             0x00000001053de078 undetected_chromedriver + 5169272
1   undetected_chromedriver             0x00000001053d5f4a undetected_chromedriver + 5136202
2   undetected_chromedriver             0x0000000104f5236c undetected_chromedriver + 402284
3   undetected_chromedriver             0x0000000104f7b923 undetected_chromedriver + 571683
4   undetected_chromedriver             0x0000000104f7cc35 undetected_chromedriver + 576565
5   undetected_chromedriver             0x0000000104f781c7 undetected_chromedriver + 557511
6   undetected_chromedriver             0x0000000104fcd95b undetected_chromedriver + 907611
7   undetected_chromedriver             0x0000000104fcd1b5 undetected_chromedriver + 905653
8   undetected_chromedriver             0x0000000104fceef1 undetected_chromedriver + 913137
9   undetected_chromedriver             0x0000000104fc2853 undetected_chromedriver + 862291
10  undetected_chromedriver             0x0000000104f925c6 undetected_chromedriver + 665030
11  undetected_chromedriver             0x0000000104f92e4e undetected_chromedriver + 667214
12  undetected_chromedriver             0x00000001053a0c90 undetected_chromedriver + 4918416
13  undetected_chromedriver             0x00000001053a5c8d undetected_chromedriver + 4938893
14  undetected_chromedriver             0x00000001053a6365 undetected_chromedriver + 4940645
15  undetected_chromedriver             0x0000000105381d74 undetected_chromedriver + 4791668
16  undetected_chromedriver             0x00000001053a6659 undetected_chromedriver + 4941401
17  undetected_chromedriver             0x0000000105373544 undetected_chromedriver + 4732228
18  undetected_chromedriver             0x00000001053c6828 undetected_chromedriver + 5072936
19  undetected_chromedriver             0x00000001053c69e7 undetected_chromedriver + 5073383
20  undetected_chromedriver             0x00000001053d5afe undetected_chromedriver + 5135102
21  libsystem_pthread.dylib             0x00007ff8073f2df1 _pthread_start + 99
22  libsystem_pthread.dylib             0x00007ff8073ee857 thread_start + 15


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 117, in create_robust_driver
    self.driver = uc.Chrome(options=options, patcher_force_close=True)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/undetected_chromedriver/__init__.py", line 466, in __init__
    super(Chrome, self).__init__(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/chrome/webdriver.py", line 47, in __init__
    super().__init__(
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/chromium/webdriver.py", line 58, in __init__
    self.service.start()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/common/service.py", line 106, in start
    self.assert_process_still_running()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/selenium/webdriver/common/service.py", line 119, in assert_process_still_running
    raise WebDriverException(f"Service {self._path} unexpectedly exited. Status code was: {return_code}")
selenium.common.exceptions.WebDriverException: Message: Service /Users/dylanpossamai/Library/Application Support/undetected_chromedriver/undetected_chromedriver unexpectedly exited. Status code was: -9


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 351, in test_mf_extraction
    if not self.create_robust_driver(headless=headless):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 143, in create_robust_driver
    return self.create_robust_driver(headless, attempt + 1)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 143, in create_robust_driver
    return self.create_robust_driver(headless, attempt + 1)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanpossamai/Library/CloudStorage/Dropbox/Work/editorial_scripts/debug_mf_mor_extractor.py", line 145, in create_robust_driver
    raise Exception(f"Failed to create driver after {attempt} attempts")
Exception: Failed to create driver after 3 attempts

